<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="mapme.forest">
<title>Area Statistics • mapme.forest</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.1.0/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.1.0/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Area Statistics">
<meta property="og:description" content="mapme.forest">
<meta property="og:image" content="https://mapme-initiative.github.io/mapme.forest/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">mapme.forest</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/GFW.html">Download &amp; Preprocessing</a>
    <a class="dropdown-item" href="../articles/area_stats.html">Area Statistics</a>
    <a class="dropdown-item" href="../articles/big_data.html">Big Data Analytics</a>
    <a class="dropdown-item" href="../articles/frag_stats.html">Fragmentation Statistics</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav"></ul>
</div>

    
  </div>
</nav><div class="container template-article">



<script src="area_stats_files/accessible-code-block-0.0.1/empty-anchor.js"></script><script src="area_stats_files/htmlwidgets-1.5.4/htmlwidgets.js"></script><script src="area_stats_files/plotly-binding-4.10.0/plotly.js"></script><script src="area_stats_files/typedarray-0.1/typedarray.min.js"></script><link href="area_stats_files/crosstalk-1.2.0/css/crosstalk.min.css" rel="stylesheet">
<script src="area_stats_files/crosstalk-1.2.0/js/crosstalk.min.js"></script><link href="area_stats_files/plotly-htmlwidgets-css-2.5.1/plotly-htmlwidgets.css" rel="stylesheet">
<script src="area_stats_files/plotly-main-2.5.1/plotly-latest.min.js"></script><div class="row">
  <main id="main"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Area Statistics</h1>
                        <h4 data-toc-skip class="author">Darius Görgen</h4>
            
            <h4 data-toc-skip class="date">2022-03-13</h4>
      
      
      <div class="d-none name"><code>area_stats.Rmd</code></div>
    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://rspatial.org/raster" class="external-link">raster</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tibble.tidyverse.org/" class="external-link">tibble</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyr.tidyverse.org" class="external-link">tidyr</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="http://stringr.tidyverse.org" class="external-link">stringr</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://r-spatial.github.io/sf/" class="external-link">sf</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://plotly-r.com" class="external-link">plotly</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://mapme-initiative.github.io/mapme.forest">mapme.forest</a></span><span class="op">)</span></code></pre></div>
<div class="section level2">
<h2 id="forest-area-statistics">Forest Area Statistics<a class="anchor" aria-label="anchor" href="#forest-area-statistics"></a>
</h2>
<p>In the vignette on <a href="gfw.html">Global Forest Watch</a> we explained how to pre-process the Hansen dataset to model various forest definition requirements by national or international organizations. We also explained how we can obtain pseudo-yearly forest masks from the combination of the tree cover dataset for the year 2000 and the loss year layer.</p>
<p>In this section, we are taking a look how to obtain areal statistics for regions of interest from this pre-processed data. Evidently, the workflows explained here are therefore also valid for binary forest mask obtained from other sources. We are taking into consideration three different parameters in this section, which are of course the yearly forest cover within a region of interest, the yearly loss of forest cover as well as the CO2 emissions caused by forest cover loss.</p>
<p>For this last parameter, we are using an additional dataset, which requires some explanation before using it. The dataset describes the emission from above-ground woody biomass loss in the tropics (<a href="https://onlinelibrary.wiley.com/doi/pdf/10.1111/gcb.13153" class="external-link">Zarin et al. 2016</a>) and it reflects estimated tons of carbon dioxide emissions to the atmosphere as a result of above-ground biomass loss. Estimates are based on the collocation of above-ground live woody biomass density values for the year 2000 from (<a href="https://www.nature.com/articles/nclimate1354" class="external-link">Baccini et al. 2012</a>) with annual tree cover loss data from 2001 through 2018 from (<a href="https://science.sciencemag.org/content/342/6160/850" class="external-link">Hansen et al. 2013</a>).</p>
<p>For the responsible use of this dataset it is crucial to note, that all of the above-ground carbon is considered to be “committed” emissions to the atmosphere upon clearing. Emissions are “gross” rather than “net” estimates, meaning that information about the fate of land after clearing, and its associated carbon value, is not incorporated.</p>
</div>
<div class="section level2">
<h2 id="calculation-of-areal-statistics">Calculation of areal statistics<a class="anchor" aria-label="anchor" href="#calculation-of-areal-statistics"></a>
</h2>
<p>First, we read in the necessary datasets we need for the present calculation. Additionally to the tree cover and loss layer we need the dataset representing CO2 emissions of woody biomass as well as our regions of interest for which we want to derive aggregated values. We take a quick look at how our polygons of interest are spatially distributed over the study area.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># read in example data from package directory</span>
<span class="va">treeCover</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/raster/man/raster.html" class="external-link">raster</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"pkgTest_treecover2000.tif"</span>, package <span class="op">=</span> <span class="st">"mapme.forest"</span><span class="op">)</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/pkg/raster/man/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">treeCover</span><span class="op">)</span> <span class="op">=</span> <span class="st">"tree.cover"</span>
<span class="va">lossYear</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/raster/man/raster.html" class="external-link">raster</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"pkgTest_lossyear.tif"</span>, package <span class="op">=</span> <span class="st">"mapme.forest"</span><span class="op">)</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/pkg/raster/man/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">lossYear</span><span class="op">)</span> <span class="op">=</span> <span class="st">"loss.year"</span>
<span class="va">co2Layer</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/raster/man/raster.html" class="external-link">raster</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"pkgTest_co2_emission.tif"</span>, package <span class="op">=</span> <span class="st">"mapme.forest"</span><span class="op">)</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/pkg/raster/man/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">co2Layer</span><span class="op">)</span> <span class="op">=</span> <span class="st">"co2.emiss"</span>
<span class="va">roi</span> <span class="op">=</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_read.html" class="external-link">st_read</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"aoi_polys.gpkg"</span>, package <span class="op">=</span> <span class="st">"mapme.forest"</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<pre><code><span class="co">## Reading layer `aoi_polys' from data source </span>
<span class="co">##   `/home/runner/work/_temp/Library/mapme.forest/extdata/aoi_polys.gpkg' </span>
<span class="co">##   using driver `GPKG'</span>
<span class="co">## Simple feature collection with 8 features and 1 field</span>
<span class="co">## Geometry type: POLYGON</span>
<span class="co">## Dimension:     XY</span>
<span class="co">## Bounding box:  xmin: 107.1291 ymin: 16.59741 xmax: 107.2502 ymax: 16.6916</span>
<span class="co">## Geodetic CRS:  WGS 84</span></code></pre>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># create simple plot</span>
<span class="fu"><a href="https://rdrr.io/pkg/raster/man/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">treeCover</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/pkg/raster/man/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">roi</span>, add <span class="op">=</span><span class="cn">TRUE</span>, col<span class="op">=</span><span class="cn">NA</span><span class="op">)</span></code></pre></div>
<p><img src="area_stats_files/figure-html/unnamed-chunk-2-1.png" width="700"></p>
<p>Now, this is only a small test dataset, which only purpose is to demonstrate the functionality of the routines we developed here. In general, units of interest could be arbitrary polygons distributed over the globe, representing valuable ecosystems or protected areas, intervention regions of international donor organizations as well as complete countries or states. It really depends on the needs of your project, for which units to calculate the areal statistics for. The routines used here are optimized for parallel computing on rather large machines to process a lot of data in less time. However, they can also be used on smaller machines like laptops and office computers, especially if the regions of interest might be small in number and size.</p>
<p>We start here, in applying the pre-processing routine to our tree cover dataset to remove clumps below our desired threshold and to retrieve yearly binary forest masks.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># clump removal and threshold application to source data from the year 2000</span>
<span class="va">treeCover_binary</span> <span class="op">=</span> <span class="fu"><a href="../reference/prepTC.html">prepTC</a></span><span class="op">(</span><span class="va">treeCover</span>,
                          thresholdClump <span class="op">=</span> <span class="fl">10</span>,
                          thresholdCover <span class="op">=</span> <span class="fl">50</span><span class="op">)</span>

<span class="co"># creation of yearly maps based on binary raster and loss year layer</span>
<span class="va">treeCover_yearly</span> <span class="op">=</span> <span class="fu"><a href="../reference/getTM.html">getTM</a></span><span class="op">(</span><span class="va">treeCover_binary</span>,
                         <span class="va">lossYear</span>, <span class="fl">2000</span><span class="op">:</span><span class="fl">2018</span><span class="op">)</span>

<span class="co"># applying minimal mapping unit for the yearly layers</span>
<span class="va">treeCover_yearly</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/raster/man/stack.html" class="external-link">stack</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fu"><a href="https://rdrr.io/pkg/raster/man/nlayers.html" class="external-link">nlayers</a></span><span class="op">(</span><span class="va">treeCover_yearly</span><span class="op">)</span>, <span class="kw">function</span><span class="op">(</span><span class="va">l</span><span class="op">)</span><span class="op">{</span>
  <span class="va">treeCover_yearly</span><span class="op">[[</span><span class="va">l</span><span class="op">]</span><span class="op">]</span> <span class="op">=</span> <span class="fu"><a href="../reference/prepTC.html">prepTC</a></span><span class="op">(</span><span class="va">treeCover_yearly</span><span class="op">[[</span><span class="va">l</span><span class="op">]</span><span class="op">]</span>, thresholdClump <span class="op">=</span> <span class="fl">10</span><span class="op">)</span>
<span class="op">}</span><span class="op">)</span><span class="op">)</span>
<span class="co"># stack all layers to get time series 2000 to 2018</span>
<span class="fu"><a href="https://rdrr.io/pkg/raster/man/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">treeCover_yearly</span><span class="op">)</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="st">"y"</span>, <span class="fl">2000</span><span class="op">:</span><span class="fl">2018</span>, sep <span class="op">=</span> <span class="st">""</span><span class="op">)</span></code></pre></div>
</div>
<div class="section level2">
<h2 id="tree-cover-area">Tree Cover Area<a class="anchor" aria-label="anchor" href="#tree-cover-area"></a>
</h2>
<p>Here, we present the standard approach to call our functions. The first might be to calculate the yearly forest area within each polygon. Note, that the area is calculated differently for projected raster datasets and raster data in geographic coordinates. The former uses the units of the projection to precisly calculate the area within a pixel, the latter estimates the area of a pixel based on its geographic position using <code><a href="https://rdrr.io/pkg/raster/man/area.html" class="external-link">raster::area</a></code>. Projecting your data to a suitable projection will deliver more accurate results and it might be a good idea to project your data before applying the function. Here, we will compare the effect of projecting our raster data to a local coordinate reference system (CRS). We will choose UTM and use some code to calculate the UTM zone for our central point in the raster.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># calculate the corresponding utm zone</span>
<span class="va">centroid</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/warning.html" class="external-link">suppressWarnings</a></span><span class="op">(</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/geos_unary.html" class="external-link">st_centroid</a></span><span class="op">(</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_as_sfc.html" class="external-link">st_as_sfc</a></span><span class="op">(</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_bbox.html" class="external-link">st_bbox</a></span><span class="op">(</span><span class="va">treeCover_yearly</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>
<span class="va">zone</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">floor</a></span><span class="op">(</span><span class="op">(</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_coordinates.html" class="external-link">st_coordinates</a></span><span class="op">(</span><span class="va">centroid</span><span class="op">)</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span> <span class="op">+</span> <span class="fl">180</span><span class="op">)</span> <span class="op">/</span> <span class="fl">6</span><span class="op">)</span> <span class="op">+</span> <span class="fl">1</span>
<span class="va">utm</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"+proj=utm +zone="</span>, <span class="va">zone</span>,<span class="st">" +ellps=WGS84 +datum=WGS84 +units=m +no_defs"</span><span class="op">)</span>

<span class="co"># reproject the raster data set</span>
<span class="va">proj_TC_yearly</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/raster/man/projectRaster.html" class="external-link">projectRaster</a></span><span class="op">(</span><span class="va">treeCover_yearly</span>, crs <span class="op">=</span> <span class="va">utm</span>, method <span class="op">=</span> <span class="st">"ngb"</span><span class="op">)</span>
<span class="co"># reproject the regions of interest</span>
<span class="va">proj_roi</span> <span class="op">=</span> <span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_transform.html" class="external-link">st_transform</a></span><span class="op">(</span><span class="va">roi</span>, <span class="va">utm</span><span class="op">)</span>

<span class="va">ncores</span> <span class="op">=</span> <span class="fl">2</span>
<span class="kw">if</span><span class="op">(</span><span class="st">"Windows"</span> <span class="op"><a href="https://rdrr.io/pkg/raster/man/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.info.html" class="external-link">Sys.info</a></span><span class="op">(</span><span class="op">)</span><span class="op">[</span><span class="st">'sysname'</span><span class="op">]</span><span class="op">)</span> <span class="va">ncores</span> <span class="op">=</span> <span class="fl">1</span>
<span class="co"># area calculation for unprojected raster</span>
<span class="va">result_latlon</span> <span class="op">=</span> <span class="fu"><a href="../reference/AreaCalc.html">AreaCalc</a></span><span class="op">(</span><span class="va">treeCover_yearly</span>,
                         studysite <span class="op">=</span> <span class="va">roi</span><span class="op">[</span><span class="fl">2</span>,<span class="op">]</span>,
                         latlon<span class="op">=</span><span class="cn">TRUE</span>,
                         polyName <span class="op">=</span> <span class="st">"id"</span>,
                         ncores <span class="op">=</span> <span class="va">ncores</span>,
                         years <span class="op">=</span> <span class="fl">2000</span><span class="op">:</span><span class="fl">2018</span><span class="op">)</span>
<span class="co"># area calculation fo projected raster</span>
<span class="va">result_proj</span> <span class="op">=</span> <span class="fu"><a href="../reference/AreaCalc.html">AreaCalc</a></span><span class="op">(</span><span class="va">proj_TC_yearly</span>,
                       studysite <span class="op">=</span> <span class="va">proj_roi</span><span class="op">[</span><span class="fl">2</span>,<span class="op">]</span>,
                       latlon<span class="op">=</span><span class="cn">FALSE</span>,
                       polyName <span class="op">=</span> <span class="st">"id"</span>,
                       ncores <span class="op">=</span> <span class="va">ncores</span>,
                       years <span class="op">=</span> <span class="fl">2000</span><span class="op">:</span><span class="fl">2018</span><span class="op">)</span>
<span class="co"># rescale area values to ha for unprojected results</span>
<span class="va">area_latlon</span> <span class="op">=</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_geometry.html" class="external-link">st_drop_geometry</a></span><span class="op">(</span><span class="va">result_latlon</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
  <span class="fu"><a href="https://rdrr.io/pkg/raster/man/select.html" class="external-link">select</a></span><span class="op">(</span><span class="op">-</span><span class="va">id</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate_all.html" class="external-link">mutate_all</a></span><span class="op">(</span><span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="va">x</span> <span class="op">*</span> <span class="fl">100</span><span class="op">)</span> <span class="co"># rescale to ha </span>
<span class="co"># rescalue area values to ha for projected results</span>
<span class="va">area_proj</span> <span class="op">=</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_geometry.html" class="external-link">st_drop_geometry</a></span><span class="op">(</span><span class="va">result_proj</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
  <span class="fu"><a href="https://rdrr.io/pkg/raster/man/select.html" class="external-link">select</a></span><span class="op">(</span><span class="op">-</span><span class="va">id</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate_all.html" class="external-link">mutate_all</a></span><span class="op">(</span><span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="va">x</span> <span class="op">/</span> <span class="fl">10000</span><span class="op">)</span> <span class="co"># rescale to ha </span>

<span class="co"># calculate difference summaries</span>
<span class="va">diff</span> <span class="op">=</span> <span class="va">area_latlon</span> <span class="op">-</span> <span class="va">area_proj</span>
<span class="va">summ</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/unlist.html" class="external-link">unlist</a></span><span class="op">(</span><span class="va">diff</span><span class="op">)</span><span class="op">)</span>
<span class="va">summ</span></code></pre></div>
<pre><code><span class="co">##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. </span>
<span class="co">## -0.7219 -0.5539 -0.5537 -0.3892 -0.2614  0.1677</span></code></pre>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/pkg/raster/man/boxplot.html" class="external-link">boxplot</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/unlist.html" class="external-link">unlist</a></span><span class="op">(</span><span class="va">diff</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<p><img src="area_stats_files/figure-html/wgs_vs_proj-1.png" width="700"></p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="op">(</span><span class="fl">1</span><span class="op">-</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/unlist.html" class="external-link">unlist</a></span><span class="op">(</span><span class="va">area_latlon</span><span class="op">)</span> <span class="op">/</span> <span class="fu"><a href="https://rdrr.io/r/base/unlist.html" class="external-link">unlist</a></span><span class="op">(</span><span class="va">area_proj</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">*</span><span class="fl">100</span><span class="op">)</span></code></pre></div>
<pre><code><span class="co">## [1] 0.1599743</span></code></pre>
<p>Above, you see that we projected the raster as well as our shapefile to UTM. If either one of them shows a different projection than the other, our function for the area calculation would through an error and stop the execution. We than apply the <code>AreaCalc</code> routine for both input datasets, one time specifying <code>latlon=TRUE</code> and the other time <code>latlon=FALSE</code>. This parameters let the function know if the area should be estimated based on the geographic position on the globe using <code><a href="https://rdrr.io/pkg/raster/man/area.html" class="external-link">raster::area()</a></code>or if the area the raster data is handed to the function in a projected coordinated system. The former gives an area estimation in km², which is why we multiply the value with 100 to change the unit to ha. Since we choose a UTM projection for the other example, the map unit is in meters. We need to divide the values by 10000 in order to get to ha. Finally, we calculate the difference between these two matrices and summarize the differences between the values and plot a simple boxplot. We can see that the mean difference in the area estimates is -0.3892222 indicating that the non-projected raster dataset delivers area estimates which are on average 0.33 ha lower compared to the projected approach. An estimate of the difference in percent reveals that on average the difference is about -0.01%. Whether or not this margin of error is negligible depends on the application.</p>
</div>
<div class="section level2">
<h2 id="some-notes-on-parallel-processing">Some notes on parallel processing<a class="anchor" aria-label="anchor" href="#some-notes-on-parallel-processing"></a>
</h2>
<p>Note that in both function calls we included an argument called <code>ncores</code> which determines the number of cores used in parallel processing. If you do not wish to use parallel processing you can choose here a value of <code>1</code> which will make the function work in sequential mode. There might be different scenarios, when you may want to disable parallel computing. The most obvious one is that your machine does not have the necessary computing power for parallel processing though most modern shipped laptops are at least equipped with two or four processors. Another scenario might be that you are working on a very high number of small regions of interest and you want to efficiently use your local memory. When using the above functions as well as the functions for areal statistics, each polygon and the underlying raster datasets are processed simultaneously but independently. This leads to copying a lot of the input data which might cause troubles on smaller machines. If this is the case for you, it might make sense to call our functions in a parallel version of lapply. If used this way, less data will be simultaneously copied into the memory, but you can still parallelize your workflow. This approach might be less advisable, however, when your regions of interest are very large, for example countries and states. For these use cases we refer the reader to the article on <a href="vignette(%22big_data%22)">Big Data Analyisis</a>.</p>
<p>Also note that we used the <code><a href="https://r-spatial.github.io/sf/reference/st_geometry.html" class="external-link">sf::st_drop_geometry</a></code> function to obtain only the areal data. The <code>AreaCalc</code> function and alike return the <code>roi</code> object, which is of class <code>sf</code> with the data columns amended by the areal statistics. This is important, because in addition to the areal statistics, in the returned objects we take the geometry information with us. This might not be useful in some applications, therefore you can drop the geometry by using <code>sf</code> functionality.</p>
</div>
<div class="section level2">
<h2 id="forest-loss-area-co2-emissions">Forest Loss Area &amp; CO2 Emissions<a class="anchor" aria-label="anchor" href="#forest-loss-area-co2-emissions"></a>
</h2>
<p>The calculation for forest loss area per year is very much alike the area calculation. However, next to the binary forest masks, we also add the loss year layer. Note, that for obvious reasons the forest loss could also be calculated on the the forest area information within the <code>roi</code> dataframe. Despite that we also include a own function to calculate the loss to support a wider range of use cases.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># calculation of forest loss area</span>
<span class="va">loss_area</span> <span class="op">=</span> <span class="fu"><a href="../reference/LossCalc.html">LossCalc</a></span><span class="op">(</span>inputForestMap <span class="op">=</span> <span class="va">treeCover_yearly</span>,
                     inputLossMap <span class="op">=</span> <span class="va">lossYear</span>,
                     studysite <span class="op">=</span> <span class="va">result_latlon</span>,
                     latlon <span class="op">=</span> <span class="cn">TRUE</span>,
                     polyName <span class="op">=</span> <span class="st">"id"</span>,
                     ncores <span class="op">=</span> <span class="va">ncores</span>,
                     years <span class="op">=</span> <span class="fl">2000</span><span class="op">:</span><span class="fl">2018</span><span class="op">)</span></code></pre></div>
<p>For the estimation of CO2 emissions corresponding to forest cover loss, we use a very similiar function call you have seen above and addtionally provide the CO2 layer.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># calculation of co2 emissions</span>
<span class="va">co2_emission</span> <span class="op">=</span> <span class="fu"><a href="../reference/CO2Calc.html">CO2Calc</a></span><span class="op">(</span>inputForestMap <span class="op">=</span> <span class="va">treeCover_yearly</span>,
                       inputLossMap <span class="op">=</span> <span class="va">lossYear</span>,
                       inputCO2Map <span class="op">=</span> <span class="va">co2Layer</span>,
                       studysite <span class="op">=</span> <span class="va">result_latlon</span>,
                       polyName <span class="op">=</span> <span class="st">"id"</span>,
                       ncores <span class="op">=</span> <span class="va">ncores</span>,
                       years <span class="op">=</span> <span class="fl">2000</span><span class="op">:</span><span class="fl">2018</span><span class="op">)</span></code></pre></div>
<p>We can now bind together the results we obtained in order to get one <code>sf</code>-object where all the areal statistics are found. For this, we use some <code>dplyr</code> functionality for data-handling which can be applied to <code>sf</code>-objects as well</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># binding all areal statistics together</span>
<span class="va">results</span> <span class="op">=</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_geometry.html" class="external-link">st_drop_geometry</a></span><span class="op">(</span><span class="va">result_latlon</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">left_join</a></span><span class="op">(</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_geometry.html" class="external-link">st_drop_geometry</a></span><span class="op">(</span><span class="va">loss_area</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">left_join</a></span><span class="op">(</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_geometry.html" class="external-link">st_drop_geometry</a></span><span class="op">(</span><span class="va">co2_emission</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<p>With this data set at hand, we can start investigate the forest cover dynamics between our polygons. We will use a simple ggplot for visualization. Since the data currently is presented in a wide format, which means that each row represents one polygon, we need to transfer it to a long format before handing the data to ggplot.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># simple plot of yearly tree cover</span>
<span class="va">plt</span> <span class="op">=</span> <span class="va">results</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
  <span class="fu"><a href="https://tidyr.tidyverse.org/reference/gather.html" class="external-link">gather</a></span><span class="op">(</span><span class="st">"type"</span>, <span class="st">"area"</span>, <span class="op">-</span><span class="va">id</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
  <span class="fu"><a href="https://tidyr.tidyverse.org/reference/separate.html" class="external-link">separate</a></span><span class="op">(</span><span class="va">type</span>, into <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"var"</span>,<span class="st">"year"</span><span class="op">)</span>, <span class="st">"_"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>year <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/raster/man/factor.html" class="external-link">as.factor</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="va">year</span><span class="op">)</span><span class="op">)</span>,
         var <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/raster/man/factor.html" class="external-link">as.factor</a></span><span class="op">(</span><span class="va">var</span><span class="op">)</span>,
         area <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="va">area</span><span class="op">)</span>,
         id <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/raster/man/factor.html" class="external-link">as.factor</a></span><span class="op">(</span><span class="va">id</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">year</span>, y <span class="op">=</span> <span class="va">area</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_grid.html" class="external-link">facet_grid</a></span><span class="op">(</span>rows <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/vars.html" class="external-link">vars</a></span><span class="op">(</span><span class="va">var</span><span class="op">)</span>, scales <span class="op">=</span> <span class="st">"free_y"</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">geom_line</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>group <span class="op">=</span> <span class="va">id</span>, color <span class="op">=</span> <span class="st">"red"</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html" class="external-link">geom_point</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>color <span class="op">=</span> <span class="st">"red"</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_minimal</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">theme</a></span><span class="op">(</span>axis.text.x <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_text</a></span><span class="op">(</span>angle <span class="op">=</span> <span class="fl">45</span>, hjust <span class="op">=</span> <span class="fl">1</span><span class="op">)</span><span class="op">)</span>

<span class="fu"><a href="https://rdrr.io/pkg/plotly/man/ggplotly.html" class="external-link">ggplotly</a></span><span class="op">(</span><span class="va">plt</span><span class="op">)</span></code></pre></div>
<div id="htmlwidget-57c6f0f18c362e76c25b" style="width:700px;height:432.632880098888px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-57c6f0f18c362e76c25b">{"x":{"data":[{"x":[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19],"y":[2.95000100135803,2.88218450546265,2.88218450546265,2.88218450546265,2.88218450546265,2.88218450546265,2.88144707679749,2.6538188457489,2.27513432502747,2.23319864273071,1.53622353076935,1.0768609046936,1.02684569358826,0.996413171291351,0.980192840099335,0.464744657278061,0.256844133138657,0.15779834985733,0.00958448741585016],"text":["year: 2000<br />area: 2.950001e+00<br />id: 2<br />colour: red","year: 2001<br />area: 2.882185e+00<br />id: 2<br />colour: red","year: 2002<br />area: 2.882185e+00<br />id: 2<br />colour: red","year: 2003<br />area: 2.882185e+00<br />id: 2<br />colour: red","year: 2004<br />area: 2.882185e+00<br />id: 2<br />colour: red","year: 2005<br />area: 2.882185e+00<br />id: 2<br />colour: red","year: 2006<br />area: 2.881447e+00<br />id: 2<br />colour: red","year: 2007<br />area: 2.653819e+00<br />id: 2<br />colour: red","year: 2008<br />area: 2.275134e+00<br />id: 2<br />colour: red","year: 2009<br />area: 2.233199e+00<br />id: 2<br />colour: red","year: 2010<br />area: 1.536224e+00<br />id: 2<br />colour: red","year: 2011<br />area: 1.076861e+00<br />id: 2<br />colour: red","year: 2012<br />area: 1.026846e+00<br />id: 2<br />colour: red","year: 2013<br />area: 9.964132e-01<br />id: 2<br />colour: red","year: 2014<br />area: 9.801928e-01<br />id: 2<br />colour: red","year: 2015<br />area: 4.647447e-01<br />id: 2<br />colour: red","year: 2016<br />area: 2.568441e-01<br />id: 2<br />colour: red","year: 2017<br />area: 1.577983e-01<br />id: 2<br />colour: red","year: 2018<br />area: 9.584487e-03<br />id: 2<br />colour: red"],"type":"scatter","mode":"lines","line":{"width":1.88976377952756,"color":"rgba(248,118,109,1)","dash":"solid"},"hoveron":"points","name":"red","legendgroup":"red","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19],"y":[0,0,0,0,0,33,9356.85546875,14546.8115234375,1661.61950683594,26489.544921875,16283.1220703125,1608.00402832031,1005.04962158203,839,21005.609375,8522.4287109375,3718.19262695312,6106.1337890625,620],"text":["year: 2000<br />area: 0.000000e+00<br />id: 2<br />colour: red","year: 2001<br />area: 0.000000e+00<br />id: 2<br />colour: red","year: 2002<br />area: 0.000000e+00<br />id: 2<br />colour: red","year: 2003<br />area: 0.000000e+00<br />id: 2<br />colour: red","year: 2004<br />area: 0.000000e+00<br />id: 2<br />colour: red","year: 2005<br />area: 3.300000e+01<br />id: 2<br />colour: red","year: 2006<br />area: 9.356855e+03<br />id: 2<br />colour: red","year: 2007<br />area: 1.454681e+04<br />id: 2<br />colour: red","year: 2008<br />area: 1.661620e+03<br />id: 2<br />colour: red","year: 2009<br />area: 2.648954e+04<br />id: 2<br />colour: red","year: 2010<br />area: 1.628312e+04<br />id: 2<br />colour: red","year: 2011<br />area: 1.608004e+03<br />id: 2<br />colour: red","year: 2012<br />area: 1.005050e+03<br />id: 2<br />colour: red","year: 2013<br />area: 8.390000e+02<br />id: 2<br />colour: red","year: 2014<br />area: 2.100561e+04<br />id: 2<br />colour: red","year: 2015<br />area: 8.522429e+03<br />id: 2<br />colour: red","year: 2016<br />area: 3.718193e+03<br />id: 2<br />colour: red","year: 2017<br />area: 6.106134e+03<br />id: 2<br />colour: red","year: 2018<br />area: 6.200000e+02<br />id: 2<br />colour: red"],"type":"scatter","mode":"lines","line":{"width":1.88976377952756,"color":"rgba(248,118,109,1)","dash":"solid"},"hoveron":"points","name":"red","legendgroup":"red","showlegend":false,"xaxis":"x","yaxis":"y2","hoverinfo":"text","frame":null},{"x":[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19],"y":[0.506589531898499,0,0,0,0,0.000737282098270953,0.227628320455551,0.36836251616478,0.0404610373079777,0.662165641784668,0.423207730054855,0.0466721653938293,0.0274834092706442,0.0221186503767967,0.527982354164124,0.234872803092003,0.11495091766119,0.169321626424789,0.0162200089544058],"text":["year: 2000<br />area: 5.065895e-01<br />id: 2<br />colour: red","year: 2001<br />area: 0.000000e+00<br />id: 2<br />colour: red","year: 2002<br />area: 0.000000e+00<br />id: 2<br />colour: red","year: 2003<br />area: 0.000000e+00<br />id: 2<br />colour: red","year: 2004<br />area: 0.000000e+00<br />id: 2<br />colour: red","year: 2005<br />area: 7.372821e-04<br />id: 2<br />colour: red","year: 2006<br />area: 2.276283e-01<br />id: 2<br />colour: red","year: 2007<br />area: 3.683625e-01<br />id: 2<br />colour: red","year: 2008<br />area: 4.046104e-02<br />id: 2<br />colour: red","year: 2009<br />area: 6.621656e-01<br />id: 2<br />colour: red","year: 2010<br />area: 4.232077e-01<br />id: 2<br />colour: red","year: 2011<br />area: 4.667217e-02<br />id: 2<br />colour: red","year: 2012<br />area: 2.748341e-02<br />id: 2<br />colour: red","year: 2013<br />area: 2.211865e-02<br />id: 2<br />colour: red","year: 2014<br />area: 5.279824e-01<br />id: 2<br />colour: red","year: 2015<br />area: 2.348728e-01<br />id: 2<br />colour: red","year: 2016<br />area: 1.149509e-01<br />id: 2<br />colour: red","year: 2017<br />area: 1.693216e-01<br />id: 2<br />colour: red","year: 2018<br />area: 1.622001e-02<br />id: 2<br />colour: red"],"type":"scatter","mode":"lines","line":{"width":1.88976377952756,"color":"rgba(248,118,109,1)","dash":"solid"},"hoveron":"points","name":"red","legendgroup":"red","showlegend":false,"xaxis":"x","yaxis":"y3","hoverinfo":"text","frame":null},{"x":[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19],"y":[2.95000100135803,2.88218450546265,2.88218450546265,2.88218450546265,2.88218450546265,2.88218450546265,2.88144707679749,2.6538188457489,2.27513432502747,2.23319864273071,1.53622353076935,1.0768609046936,1.02684569358826,0.996413171291351,0.980192840099335,0.464744657278061,0.256844133138657,0.15779834985733,0.00958448741585016],"text":["year: 2000<br />area: 2.950001e+00<br />colour: red","year: 2001<br />area: 2.882185e+00<br />colour: red","year: 2002<br />area: 2.882185e+00<br />colour: red","year: 2003<br />area: 2.882185e+00<br />colour: red","year: 2004<br />area: 2.882185e+00<br />colour: red","year: 2005<br />area: 2.882185e+00<br />colour: red","year: 2006<br />area: 2.881447e+00<br />colour: red","year: 2007<br />area: 2.653819e+00<br />colour: red","year: 2008<br />area: 2.275134e+00<br />colour: red","year: 2009<br />area: 2.233199e+00<br />colour: red","year: 2010<br />area: 1.536224e+00<br />colour: red","year: 2011<br />area: 1.076861e+00<br />colour: red","year: 2012<br />area: 1.026846e+00<br />colour: red","year: 2013<br />area: 9.964132e-01<br />colour: red","year: 2014<br />area: 9.801928e-01<br />colour: red","year: 2015<br />area: 4.647447e-01<br />colour: red","year: 2016<br />area: 2.568441e-01<br />colour: red","year: 2017<br />area: 1.577983e-01<br />colour: red","year: 2018<br />area: 9.584487e-03<br />colour: red"],"type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(248,118,109,1)","opacity":1,"size":5.66929133858268,"symbol":"circle","line":{"width":1.88976377952756,"color":"rgba(248,118,109,1)"}},"hoveron":"points","name":"red","legendgroup":"red","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19],"y":[0,0,0,0,0,33,9356.85546875,14546.8115234375,1661.61950683594,26489.544921875,16283.1220703125,1608.00402832031,1005.04962158203,839,21005.609375,8522.4287109375,3718.19262695312,6106.1337890625,620],"text":["year: 2000<br />area: 0.000000e+00<br />colour: red","year: 2001<br />area: 0.000000e+00<br />colour: red","year: 2002<br />area: 0.000000e+00<br />colour: red","year: 2003<br />area: 0.000000e+00<br />colour: red","year: 2004<br />area: 0.000000e+00<br />colour: red","year: 2005<br />area: 3.300000e+01<br />colour: red","year: 2006<br />area: 9.356855e+03<br />colour: red","year: 2007<br />area: 1.454681e+04<br />colour: red","year: 2008<br />area: 1.661620e+03<br />colour: red","year: 2009<br />area: 2.648954e+04<br />colour: red","year: 2010<br />area: 1.628312e+04<br />colour: red","year: 2011<br />area: 1.608004e+03<br />colour: red","year: 2012<br />area: 1.005050e+03<br />colour: red","year: 2013<br />area: 8.390000e+02<br />colour: red","year: 2014<br />area: 2.100561e+04<br />colour: red","year: 2015<br />area: 8.522429e+03<br />colour: red","year: 2016<br />area: 3.718193e+03<br />colour: red","year: 2017<br />area: 6.106134e+03<br />colour: red","year: 2018<br />area: 6.200000e+02<br />colour: red"],"type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(248,118,109,1)","opacity":1,"size":5.66929133858268,"symbol":"circle","line":{"width":1.88976377952756,"color":"rgba(248,118,109,1)"}},"hoveron":"points","name":"red","legendgroup":"red","showlegend":false,"xaxis":"x","yaxis":"y2","hoverinfo":"text","frame":null},{"x":[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19],"y":[0.506589531898499,0,0,0,0,0.000737282098270953,0.227628320455551,0.36836251616478,0.0404610373079777,0.662165641784668,0.423207730054855,0.0466721653938293,0.0274834092706442,0.0221186503767967,0.527982354164124,0.234872803092003,0.11495091766119,0.169321626424789,0.0162200089544058],"text":["year: 2000<br />area: 5.065895e-01<br />colour: red","year: 2001<br />area: 0.000000e+00<br />colour: red","year: 2002<br />area: 0.000000e+00<br />colour: red","year: 2003<br />area: 0.000000e+00<br />colour: red","year: 2004<br />area: 0.000000e+00<br />colour: red","year: 2005<br />area: 7.372821e-04<br />colour: red","year: 2006<br />area: 2.276283e-01<br />colour: red","year: 2007<br />area: 3.683625e-01<br />colour: red","year: 2008<br />area: 4.046104e-02<br />colour: red","year: 2009<br />area: 6.621656e-01<br />colour: red","year: 2010<br />area: 4.232077e-01<br />colour: red","year: 2011<br />area: 4.667217e-02<br />colour: red","year: 2012<br />area: 2.748341e-02<br />colour: red","year: 2013<br />area: 2.211865e-02<br />colour: red","year: 2014<br />area: 5.279824e-01<br />colour: red","year: 2015<br />area: 2.348728e-01<br />colour: red","year: 2016<br />area: 1.149509e-01<br />colour: red","year: 2017<br />area: 1.693216e-01<br />colour: red","year: 2018<br />area: 1.622001e-02<br />colour: red"],"type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(248,118,109,1)","opacity":1,"size":5.66929133858268,"symbol":"circle","line":{"width":1.88976377952756,"color":"rgba(248,118,109,1)"}},"hoveron":"points","name":"red","legendgroup":"red","showlegend":false,"xaxis":"x","yaxis":"y3","hoverinfo":"text","frame":null}],"layout":{"margin":{"t":39.5141341357194,"r":18.9954337899543,"b":43.8206114567417,"l":31.4155251141553},"font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[0.4,19.6],"tickmode":"array","ticktext":["2000","2001","2002","2003","2004","2005","2006","2007","2008","2009","2010","2011","2012","2013","2014","2015","2016","2017","2018"],"tickvals":[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19],"categoryorder":"array","categoryarray":["2000","2001","2002","2003","2004","2005","2006","2007","2008","2009","2010","2011","2012","2013","2014","2015","2016","2017","2018"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.65296803652968,"tickwidth":0,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-45,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(235,235,235,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"y3","title":"","hoverformat":".2f"},"annotations":[{"text":"year","x":0.5,"y":0,"showarrow":false,"ax":0,"ay":0,"font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187},"xref":"paper","yref":"paper","textangle":-0,"xanchor":"center","yanchor":"top","annotationType":"axis","yshift":-23.959445357552},{"text":"area","x":0,"y":0.5,"showarrow":false,"ax":0,"ay":0,"font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187},"xref":"paper","yref":"paper","textangle":-90,"xanchor":"right","yanchor":"center","annotationType":"axis","xshift":-16.0730593607306},{"text":"area","x":1,"y":0.836500646659804,"showarrow":false,"ax":0,"ay":0,"font":{"color":"rgba(26,26,26,1)","family":"","size":11.689497716895},"xref":"paper","yref":"paper","textangle":90,"xanchor":"left","yanchor":"middle"},{"text":"co2","x":1,"y":0.5,"showarrow":false,"ax":0,"ay":0,"font":{"color":"rgba(26,26,26,1)","family":"","size":11.689497716895},"xref":"paper","yref":"paper","textangle":90,"xanchor":"left","yanchor":"middle"},{"text":"loss","x":1,"y":0.163499353340196,"showarrow":false,"ax":0,"ay":0,"font":{"color":"rgba(26,26,26,1)","family":"","size":11.689497716895},"xref":"paper","yref":"paper","textangle":90,"xanchor":"left","yanchor":"middle"}],"yaxis":{"domain":[0.673001293319608,1],"automargin":true,"type":"linear","autorange":false,"range":[-0.137436338281259,3.09702182705514],"tickmode":"array","ticktext":["0","1","2","3"],"tickvals":[0,1,2,3],"categoryorder":"array","categoryarray":["0","1","2","3"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.65296803652968,"tickwidth":0,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(235,235,235,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"x","title":"","hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0.673001293319608,"y1":1},{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","y0":0.673001293319608,"y1":1,"x0":0,"x1":23.37899543379,"xanchor":1,"xsizemode":"pixel"},{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0.339667959986275,"y1":0.660332040013725},{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","y0":0.339667959986275,"y1":0.660332040013725,"x0":0,"x1":23.37899543379,"xanchor":1,"xsizemode":"pixel"},{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":0.326998706680392},{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","y0":0,"y1":0.326998706680392,"x0":0,"x1":23.37899543379,"xanchor":1,"xsizemode":"pixel"}],"yaxis2":{"type":"linear","autorange":false,"range":[-1324.47724609375,27814.0221679687],"tickmode":"array","ticktext":["0","10000","20000"],"tickvals":[0,10000,20000],"categoryorder":"array","categoryarray":["0","10000","20000"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.65296803652968,"tickwidth":0,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"domain":[0.339667959986275,0.660332040013725],"gridcolor":"rgba(235,235,235,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"x","title":"","hoverformat":".2f"},"yaxis3":{"type":"linear","autorange":false,"range":[-0.0331082820892334,0.695273923873901],"tickmode":"array","ticktext":["0.0","0.2","0.4","0.6"],"tickvals":[0,0.2,0.4,0.6],"categoryorder":"array","categoryarray":["0.0","0.2","0.4","0.6"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.65296803652968,"tickwidth":0,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"domain":[0,0.326998706680392],"gridcolor":"rgba(235,235,235,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"x","title":"","hoverformat":".2f"},"showlegend":true,"legend":{"bgcolor":null,"bordercolor":null,"borderwidth":0,"font":{"color":"rgba(0,0,0,1)","family":"","size":11.689497716895},"title":{"text":"colour","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}}},"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"source":"A","attrs":{"49da4d6dcaef":{"x":{},"y":{},"colour":{},"type":"scatter"},"49daf894f25":{"x":{},"y":{},"colour":{}}},"cur_data":"49da4d6dcaef","visdat":{"49da4d6dcaef":["function (y) ","x"],"49daf894f25":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by <a href="http://dariusgoergen.com/" class="external-link">Darius Görgen</a>, <a href="https://mapme-initiative.org/" class="external-link">MAPME-Initiative</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.2.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
