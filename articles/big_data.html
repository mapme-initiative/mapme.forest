<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="mapme.forest">
<title>Big Data Analytics • mapme.forest</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.1.0/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.1.0/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Big Data Analytics">
<meta property="og:description" content="mapme.forest">
<meta property="og:image" content="https://mapme-initiative.github.io/mapme.forest/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">mapme.forest</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-2">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/GFW.html">Download &amp; Preprocessing</a>
    <a class="dropdown-item" href="../articles/area_stats.html">Area Statistics</a>
    <a class="dropdown-item" href="../articles/big_data.html">Big Data Analytics</a>
    <a class="dropdown-item" href="../articles/frag_stats.html">Fragmentation Statistics</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav"></ul>
</div>

    
  </div>
</nav><div class="container template-article">
<script src="big_data_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <main id="main"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Big Data Analytics</h1>
                        <h4 data-toc-skip class="author">Darius Görgen</h4>
            
            <h4 data-toc-skip class="date">2021-12-01</h4>
      
      
      <div class="d-none name"><code>big_data.Rmd</code></div>
    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://r-spatial.github.io/sf/" class="external-link">sf</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://mapme-initiative.github.io/mapme.forest">mapme.forest</a></span><span class="op">)</span></code></pre></div>
<p>The previously demonstrated R routines base on the <code>raster</code> package which uses quite a lot of RAM and this can be inefficient when it comes to the analysis of very large rasters. In order to make the analysis of extensive regions feasible we developed a routine using <a href="https://grass.osgeo.org/" class="external-link">GRASS GIS</a> for the complete processing chain from pre-processing GFW data to the extraction of zonal statistics. This routine is very RAM efficient rendering the analysis of large areas possible even when only restricted hardware is available (8GB of RAM should be enough for most use cases).</p>
<p>Equally to most of the other functions, it is expected that the path to the GDAL binaries is exposed in your environment variable (refer to the README of this package for more information). Additionally, the path to a working installation of GRASS GIS version &gt;=7.0.0 is required for the function to work properly. Internally, the function uses the <a href="https://grass.osgeo.org/grass78/manuals/addons/r.area.html" class="external-link"><code>r.area</code></a> addon, which will be installed automatically if it is not present in the specified addon path option.</p>
<p>As inputs to the function it is required to specify the path to the tree cover, loss year and CO2 emission files which cover the area of the polygons you are interested in. We advise you to use the files you obtained by calling <code><a href="../reference/downloadGFW.html">downloadGFW()</a></code> with your area of interest, however, also raster files obtained in another way are suitable for the routine.</p>
<p>The function call with the sample data from this package then looks like this:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># get the file paths to the raster files</span>
<span class="va">treeCover</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"pkgTest_treecover2000.tif"</span>, package <span class="op">=</span> <span class="st">"mapme.forest"</span><span class="op">)</span>
<span class="va">lossYear</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"pkgTest_lossyear.tif"</span>, package <span class="op">=</span> <span class="st">"mapme.forest"</span><span class="op">)</span>
<span class="va">co2Layer</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"pkgTest_co2_emission.tif"</span>, package <span class="op">=</span> <span class="st">"mapme.forest"</span><span class="op">)</span>
<span class="co"># read the area of interest</span>
<span class="va">roi</span> <span class="op">=</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_read.html" class="external-link">st_read</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"aoi_polys.gpkg"</span>, package <span class="op">=</span> <span class="st">"mapme.forest"</span><span class="op">)</span><span class="op">)</span>

<span class="va">grass</span> <span class="op">=</span> <span class="st">"/usr/lib/grass78"</span>

<span class="va">roi_stats</span> <span class="op">=</span> <span class="fu"><a href="../reference/statsGRASS.html">statsGRASS</a></span><span class="op">(</span>grass <span class="op">=</span> <span class="va">grass</span>, 
                       addon_base <span class="op">=</span> <span class="st">"./data-raw/addons"</span>, 
                       areas <span class="op">=</span> <span class="va">roi</span><span class="op">[</span><span class="fl">1</span>,<span class="op">]</span>, 
                       tree_cover <span class="op">=</span> <span class="va">treeCover</span>, 
                       tree_loss <span class="op">=</span> <span class="va">lossYear</span>, 
                       tree_co2 <span class="op">=</span> <span class="va">co2Layer</span>, 
                       idcol <span class="op">=</span>  <span class="st">"id"</span>, 
                       thresholdClump <span class="op">=</span> <span class="fl">10</span>, 
                       thresholdCover <span class="op">=</span> <span class="fl">50</span>, 
                       years <span class="op">=</span> <span class="fl">2001</span><span class="op">:</span><span class="fl">2018</span>, 
                       saveRaster <span class="op">=</span> <span class="cn">F</span><span class="op">)</span></code></pre></div>
<p>This will deliver us the sf-object which entered the function with its dataframe amended by the yearly forest cover area, tree cover loss area (both in ha) and CO2 emissions. Additionally, we can turn the <code>saveRaster</code> switch to TRUE and specify a <code>outdir</code> variable in cases we want the raster output be written to disk. The first layer then represents the raw GFW tree cover with values between 0 and 100, the second layer the loss year layer, in this case with values between 0 and 18, the third layer the values of the CO2 emission equivalent, and then as many layers as specified in the years options starting from the year 2000.</p>
<p>As mentioned above, this function runs very efficiently. You can hand it a very high number of polygons simultaneously, each uniquely identified by the value in the column you specify in <code>idcol</code>. Make sure the raster files you hand to the function do cover all polygons and the function will clip and process for each polygon after another. For the cases you selected to save the resulting raster files, inside the specified <code>outdir</code> you will find a <code>GTiff</code> for each polygon named according to the value in <code>idcol</code>.</p>
  </main>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by <a href="http://dariusgoergen.com/" class="external-link">Darius Görgen</a>, <a href="https://mapme-initiative.org/" class="external-link">MAPME-Initiative</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.0.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
